(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[906],{5177:function(e,t,a){Promise.resolve().then(a.bind(a,9199))},6463:function(e,t,a){"use strict";var r=a(1169);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},6202:function(e,t,a){"use strict";a.d(t,{d4:function(){return r.useEffect},eJ:function(){return r.useState}});var r=a(1196)},4492:function(e,t,a){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=a(1196),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=r.useState,i=r.useEffect,l=r.useLayoutEffect,o=r.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!s(e,a)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),r=n({inst:{value:a,getSnapshot:t}}),s=r[0].inst,c=r[1];return l(function(){s.value=a,s.getSnapshot=t,d(s)&&c({inst:s})},[e,a,t]),i(function(){return d(s)&&c({inst:s}),e(function(){d(s)&&c({inst:s})})},[e]),o(a),a};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},5107:function(e,t,a){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=a(1196),s=a(554),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=s.useSyncExternalStore,l=r.useRef,o=r.useEffect,d=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,a,r,s){var u=l(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;var x=i(e,(u=d(function(){function e(e){if(!o){if(o=!0,i=e,e=r(e),void 0!==s&&h.hasValue){var t=h.value;if(s(t,e))return l=t}return l=e}if(t=l,n(i,e))return t;var a=r(e);return void 0!==s&&s(t,a)?t:(i=e,l=a)}var i,l,o=!1,d=void 0===a?null:a;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]},[t,a,r,s]))[0],u[1]);return o(function(){h.hasValue=!0,h.value=x},[x]),c(x),x}},554:function(e,t,a){"use strict";e.exports=a(4492)},5006:function(e,t,a){"use strict";e.exports=a(5107)},9199:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var r=a(3619),s=a(6202),n=a(8588),i=a(6463);function l(){let{token:e}=(0,n.a)(),t=(0,i.useRouter)(),[a,l]=(0,s.eJ)(null),[o,d]=(0,s.eJ)([]),[c,u]=(0,s.eJ)(null),[h,x]=(0,s.eJ)(!0),[m,g]=(0,s.eJ)(!1);(0,s.d4)(()=>{if(!e){t.push("/login");return}b(),f()},[e]);let b=async()=>{try{let t=await fetch("http://localhost:8000/api/v1/reviews/stats",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();l(e)}}catch(e){console.error("Failed to fetch stats:",e)}},f=async()=>{try{x(!0);let t=await fetch("http://localhost:8000/api/v1/reviews/due?limit=20",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();d(e),e.length>0&&u(e[0])}}catch(e){console.error("Failed to fetch due cards:",e)}finally{x(!1)}},v=async t=>{if(c){g(!0);try{if((await fetch("http://localhost:8000/api/v1/reviews/submit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({card_id:c.card_id,quality:t})})).ok){let e=o.slice(1);d(e),u(e.length>0?e[0]:null),b()}}catch(e){console.error("Failed to submit review:",e)}finally{g(!1)}}},y=async()=>{try{(await fetch("http://localhost:8000/api/v1/reviews/bulk-add?card_type=vocabulary",{method:"POST",headers:{Authorization:"Bearer ".concat(e)}})).ok&&(b(),f())}catch(e){console.error("Failed to add cards:",e)}};return h?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading reviews..."})]})}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\uD83D\uDCDA Spaced Repetition Reviews"}),a&&(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-4 shadow",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:a.total_cards}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Cards"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-4 shadow",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:a.new_cards}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"New"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-4 shadow",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-amber-600",children:a.learning_cards}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Learning"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-4 shadow",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:a.mature_cards}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mature"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-4 shadow",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-rose-600",children:a.due_today}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Due Today"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-4 shadow",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-cyan-600",children:a.reviewed_today}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Reviewed"})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg p-4 shadow col-span-2",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-teal-600",children:[a.retention_rate.toFixed(1),"%"]}),(0,r.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Retention Rate"})]})]}),c?(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg shadow-lg p-8 mb-6",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"vocabulary"===c.card_type?"\uD83D\uDCD6 Vocabulary":"\uD83D\uDCDD Grammar"}),(0,r.jsx)("div",{className:"text-4xl font-bold mb-4",children:c.content.word||c.content.rule}),(0,r.jsx)("div",{className:"text-xl text-gray-600 dark:text-gray-400",children:c.content.translation||c.content.explanation})]}),(0,r.jsxs)("div",{className:"text-center text-sm text-gray-500 mb-6",children:["Repetitions: ",c.repetitions," | EF: ",c.easiness_factor.toFixed(2)]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[(0,r.jsx)("button",{onClick:()=>v(0),disabled:m,className:"px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:"\uD83D\uDE35 Blackout"}),(0,r.jsx)("button",{onClick:()=>v(1),disabled:m,className:"px-4 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50",children:"âŒ Wrong"}),(0,r.jsx)("button",{onClick:()=>v(2),disabled:m,className:"px-4 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50",children:"\uD83D\uDE13 Hard"}),(0,r.jsx)("button",{onClick:()=>v(3),disabled:m,className:"px-4 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50",children:"\uD83E\uDD14 Good"}),(0,r.jsx)("button",{onClick:()=>v(4),disabled:m,className:"px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:"\uD83D\uDE0A Easy"}),(0,r.jsx)("button",{onClick:()=>v(5),disabled:m,className:"px-4 py-3 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 disabled:opacity-50",children:"\uD83C\uDFAF Perfect"})]}),(0,r.jsxs)("div",{className:"mt-6 text-center text-sm text-gray-500",children:[o.length-1," cards remaining"]})]}):(0,r.jsxs)("div",{className:"bg-white dark:bg-zinc-800 rounded-lg shadow-lg p-12 text-center",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF89"}),(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"All Done!"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"No cards due for review right now. Great job!"}),a&&0===a.total_cards&&(0,r.jsx)("button",{onClick:y,className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Add Vocabulary Cards"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:"\uD83D\uDCA1 How it works"}),(0,r.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"This uses the SM-2 spaced repetition algorithm to optimize your learning. Rate each card honestly - the algorithm will adjust review intervals based on your performance. Cards you find difficult will appear more frequently, while easy cards will have longer intervals."})]})]})}},8588:function(e,t,a){"use strict";let r;a.d(t,{a:function(){return x}});let s=e=>{let t;let a=new Set,r=(e,r)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=r?r:"object"!=typeof s||null===s)?s:Object.assign({},t,s),a.forEach(a=>a(t,e))}},s=()=>t,n={setState:r,getState:s,getInitialState:()=>i,subscribe:e=>(a.add(e),()=>a.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}},i=t=e(r,s,n);return n},n=e=>e?s(e):s;var i=a(1196),l=a(5006);let{useDebugValue:o}=i,{useSyncExternalStoreWithSelector:d}=l,c=!1,u=e=>e,h=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?n(e):e,a=(e,a)=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,a=arguments.length>2?arguments[2]:void 0;a&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let r=d(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,a);return o(r),r})(t,e,a);return Object.assign(a,t),a},x=(r=e=>({token:localStorage.getItem("token"),userId:localStorage.getItem("user_id"),name:localStorage.getItem("user_name"),email:localStorage.getItem("user_email"),setAuth:(t,a)=>{localStorage.setItem("token",t),localStorage.setItem("user_id",a),e({token:t,userId:a})},setProfile:(t,a)=>{try{localStorage.setItem("user_name",t),localStorage.setItem("user_email",a)}catch(e){}e({name:t,email:a})},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user_id"),localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),e({token:null,userId:null,name:null,email:null})}}))?h(r):h}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5177)}),_N_E=e.O()}]);