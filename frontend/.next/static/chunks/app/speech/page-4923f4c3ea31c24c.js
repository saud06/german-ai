(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[128],{7004:function(e,t,r){Promise.resolve().then(r.bind(r,7785))},6463:function(e,t,r){"use strict";var a=r(1169);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},3196:function(e,t,r){"use strict";r.d(t,{d4:function(){return a.useEffect}});var a=r(1196)},4492:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=r(1196),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=a.useState,l=a.useEffect,o=a.useLayoutEffect,i=a.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),a=n({inst:{value:r,getSnapshot:t}}),s=a[0].inst,c=a[1];return o(function(){s.value=r,s.getSnapshot=t,d(s)&&c({inst:s})},[e,r,t]),l(function(){return d(s)&&c({inst:s}),e(function(){d(s)&&c({inst:s})})},[e]),i(r),r};t.useSyncExternalStore=void 0!==a.useSyncExternalStore?a.useSyncExternalStore:c},5107:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=r(1196),s=r(554),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=s.useSyncExternalStore,o=a.useRef,i=a.useEffect,d=a.useMemo,c=a.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,a,s){var u=o(null);if(null===u.current){var x={hasValue:!1,value:null};u.current=x}else x=u.current;var g=l(e,(u=d(function(){function e(e){if(!i){if(i=!0,l=e,e=a(e),void 0!==s&&x.hasValue){var t=x.value;if(s(t,e))return o=t}return o=e}if(t=o,n(l,e))return t;var r=a(e);return void 0!==s&&s(t,r)?t:(l=e,o=r)}var l,o,i=!1,d=void 0===r?null:r;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]},[t,r,a,s]))[0],u[1]);return i(function(){x.hasValue=!0,x.value=g},[g]),c(g),g}},554:function(e,t,r){"use strict";e.exports=r(4492)},5006:function(e,t,r){"use strict";e.exports=r(5107)},7785:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(3619),s=r(1196),n=r(9002);function l(e,t){let r=e.toLowerCase().trim(),a=t.toLowerCase().trim();if(r===a)return 100;if(r.includes(a)||a.includes(r))return 75;let s=Math.max(r.length,a.length);if(0===s)return 100;let n=0,l=Math.min(r.length,a.length);for(let e=0;e<l;e++)r[e]===a[e]&&n++;return Math.round(n/s*100)}function o(e,t){if(0===e.length&&0===t.length)return 100;if(0===e.length)return 0;let r=0,a=Math.max(e.length,t.length);for(let s=0;s<a;s++)r+=l(e[s]||"",t[s]||"");return Math.round(r/a)}function i(e){let{expected:t,isRecording:r,onTranscriptUpdate:n}=e,[i,d]=(0,s.useState)([]),[c,u]=(0,s.useState)(!0),x=(0,s.useRef)(null),g=t.toLowerCase().split(/\s+/).filter(e=>e.length>0),m=()=>{if(x.current){try{x.current.stop()}catch(e){console.warn("Error stopping recognition:",e)}x.current=null}r||d([])};(0,s.useEffect)(()=>{if(!r){m();return}return h(),()=>m()},[r,t]);let h=()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){console.log("Speech Recognition not supported, starting demo mode"),u(!1),p();return}try{let t=new e;t.lang="de-DE",t.continuous=!0,t.interimResults=!0,t.maxAlternatives=1,t.onresult=e=>{console.log("Speech recognition result:",e);let t="",r="",a=[];for(let a=0;a<e.results.length;a++){let s=e.results[a],n=s[0].transcript.trim();n&&(s.isFinal?t+=n+" ":r+=n+" ")}let s=(t+r).trim();s&&s.split(/\s+/).filter(e=>e.length>0).forEach((e,r)=>{let s=t.trim().split(/\s+/).filter(e=>e.length>0).length;a.push({word:e.toLowerCase().replace(/[.,!?]/g,""),confidence:85,isFinal:r<s})}),console.log("Final transcript:",t),console.log("Interim transcript:",r),console.log("Word results:",a),d(a);let l=a.map(e=>e.word),i=o(g,l);null==n||n(s,i)},t.onerror=e=>{console.warn("Speech recognition error:",e.error)},t.start(),x.current=t}catch(e){console.error("Error starting speech recognition:",e),u(!1),p()}},p=()=>{if(!r)return;console.log("Starting demo mode");let e=["guten","morgen"],t=0,a=()=>{if(t<e.length&&r){let r=[];for(let a=0;a<=t;a++)r.push({word:e[a],confidence:85+10*Math.random(),isFinal:a<t});console.log("Demo adding words:",r),d(r);let s=o(g,r.map(e=>e.word));null==n||n(e.slice(0,t+1).join(" "),s),++t<=e.length&&setTimeout(a,1500)}};setTimeout(a,1e3)},f=(e,t)=>{let r=g[e];if(!r)return"extra";let a=l(r,t);return a>=90?"correct":a>=70?"similar":"incorrect"},b=(e,t)=>{let r=t?"":" opacity-70";switch(e){case"correct":return"bg-green-100 text-green-800 border-green-200".concat(r);case"similar":return"bg-yellow-100 text-yellow-800 border-yellow-200".concat(r);case"incorrect":return"bg-red-100 text-red-800 border-red-200".concat(r);case"extra":return"bg-blue-100 text-blue-800 border-blue-200".concat(r);default:return"bg-gray-100 text-gray-600 border-gray-200".concat(r)}};return(0,a.jsxs)("div",{className:"text-xs space-y-2",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Recording: ",r?"Yes":"No"," | Supported: ",c?"Yes":"No"," | Words: ",i.length,!c&&(0,a.jsx)("button",{onClick:p,className:"ml-2 px-2 py-1 bg-blue-500 text-white rounded text-xs",children:"Start Demo"})]}),r&&(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:i.length>0?i.map((e,t)=>{let r=b(f(t,e.word),e.isFinal);return(0,a.jsxs)("span",{className:"px-1.5 py-0.5 text-xs border rounded ".concat(r),children:[e.word,!e.isFinal&&(0,a.jsx)("span",{className:"ml-0.5 opacity-60",children:"..."})]},t)}):(0,a.jsx)("span",{className:"text-gray-400 text-xs italic",children:c?"Listening...":'Demo mode - click Start Demo or say "Guten Morgen"'})})]})}var d=r(2800),c=r(8588),u=r(6463);function x(){let{userId:e}=(0,c.a)(),[t,r]=(0,s.useState)("Ich gehe zur Schule."),[l,o]=(0,s.useState)(null),[x,g]=(0,s.useState)(""),[m,h]=(0,s.useState)(null),[p,f]=(0,s.useState)(null),[b,y]=(0,s.useState)(!1),[v,w]=(0,s.useState)([]),[j,k]=(0,s.useState)(!1),[N,S]=(0,s.useState)(""),[D,C]=(0,s.useState)(""),[R,E]=(0,s.useState)(!1),[A,I]=(0,s.useState)([]),[P,L]=(0,s.useState)(!1),[M,F]=(0,s.useState)(!1),[T,_]=(0,s.useState)(null),[U,B]=(0,s.useState)(0),[O,Z]=(0,s.useState)(!1),[z,W]=(0,s.useState)(!1),[V,Y]=(0,s.useState)(-1);(0,s.useRef)([]),(0,s.useRef)(null);let q=(0,s.useRef)(null),G=(0,s.useRef)(null),H=(0,s.useRef)([]),K=(0,s.useRef)(null),[J,Q]=(0,s.useState)(null),[X,$]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(0),er=(0,s.useRef)(null),ea=(0,s.useRef)(null),es=(0,s.useRef)(null),en=(0,s.useRef)(null),el=(0,s.useRef)(null),eo=()=>{if(el.current&&cancelAnimationFrame(el.current),el.current=null,en.current=null,es.current){try{es.current.close()}catch(e){}es.current=null}},ei=(0,s.useCallback)(()=>{let e=ea.current,t=en.current;if(!e||!t)return;let r=e.getContext("2d"),a=new Uint8Array(t.fftSize);t.getByteTimeDomainData(a);let s=0;for(let e=0;e<a.length;e++){let t=(a[e]-128)/128;s+=t*t}let n=Math.min(1,5*(s=Math.sqrt(s/a.length)));r.clearRect(0,0,e.width,e.height);let l=e.width,o=e.height;r.fillStyle="#e5e7eb",r.fillRect(0,0,l,o),r.fillStyle="#10b981",r.fillRect(0,0,Math.max(4,n*l),o),el.current=requestAnimationFrame(ei)},[]),ed=async()=>{try{k(!0);let e={size:12};N&&(e.level=N),D&&(e.track=D);let t=await d.Z.get("/speech/suggestions",{params:e});w(t.data||[])}catch(e){}finally{k(!1)}};(0,s.useEffect)(()=>{ed()},[N,D]);let ec=async()=>{if(l)try{E(!0),await d.Z.post("/speech/save",{expected:l.expected,transcribed:l.transcribed,score:l.score,feedback:l.feedback}),await eu()}catch(e){}finally{E(!1)}},eu=async()=>{try{L(!0);let e=await d.Z.get("/speech/history",{params:{limit:10}});I(e.data||[])}catch(e){}finally{L(!1)}};(0,s.useEffect)(()=>{eu()},[]);let ex=async()=>{if(!O){Z(!0);try{let e=(await d.Z.get("/paragraph/generate")).data;_(e),B(0),r((e.sentences||[]).join(" ")),o(null),g(""),h(null)}catch(e){f("Failed to generate paragraph. Please try again.")}finally{Z(!1)}}};(0,s.useEffect)(()=>{!M||T||O||ex()},[M]),(0,s.useCallback)(e=>{let t;let r=[],a=0,s=/[\wÄÖÜäöüß]+|[^\w\s]+|\s+/g;for(;null!==(t=s.exec(e));){let e=t[0],s=a,n=a+e.length,l=/[\wÄÖÜäöüß]/.test(e[0]||"");r.push({text:e,start:s,end:n,isWord:l}),a=n}return r},[]);let eg=async e=>{es.current=new(window.AudioContext||window.webkitAudioContext);let t=es.current.createMediaStreamSource(e);en.current=es.current.createAnalyser(),en.current.fftSize=2048,t.connect(en.current),ei()},em=()=>{et(0),er.current=window.setInterval(()=>et(e=>e+1),1e3)},eh=()=>{er.current&&window.clearInterval(er.current),er.current=null},ep=async()=>{f(null),o(null),g(""),h(null),H.current=[];try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});q.current=e;let t=new MediaRecorder(e);G.current=t,t.ondataavailable=e=>{var t;(null===(t=e.data)||void 0===t?void 0:t.size)&&H.current.push(e.data)},t.onstop=()=>{let e=new Blob(H.current,{type:t.mimeType||"audio/webm"});K.current&&URL.revokeObjectURL(K.current);let r=URL.createObjectURL(e);K.current=r,Q(r)},await eg(e),t.start(),em(),$(!0)}catch(e){f("Microphone permission denied or unsupported in this browser.")}},ef=async()=>{if(!J){f("No recording available. Please record first.");return}f(null),y(!0);try{let e=await fetch(J).then(e=>e.blob()),r=new FormData,a=M&&T?(T.sentences||[]).join(" "):t;r.append("expected",a),r.append("file",e,"recording.webm");let s=await d.Z.post("/speech/check",r,{headers:{"Content-Type":"multipart/form-data"}});o(s.data)}catch(e){f("Server speech check unavailable. You can still use local feedback below.")}finally{y(!1)}};(0,s.useEffect)(()=>()=>{var e;eo(),eh(),K.current&&URL.revokeObjectURL(K.current),null===(e=q.current)||void 0===e||e.getTracks().forEach(e=>e.stop())},[]);let eb=(0,u.useRouter)();return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900",children:[(0,a.jsx)(n.default,{}),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("button",{onClick:()=>eb.push("/dashboard"),className:"mb-4 text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 flex items-center font-medium transition-colors",children:"← Back to Dashboard"}),(0,a.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"\uD83C\uDF99️ Speech Practice"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Practice your German pronunciation with AI-powered feedback"})]}),(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mb-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"\uD83C\uDFAF Target Sentence (German)"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("input",{className:"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl focus:border-purple-600 focus:ring-2 focus:ring-purple-200 dark:bg-gray-700 dark:text-white text-lg transition-all",value:t,onChange:e=>r(e.target.value),placeholder:"Enter a German sentence..."}),(0,a.jsx)("button",{type:"button",className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-bold hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",onClick:()=>{try{let e=window.speechSynthesis;if(!e)return;let r=new SpeechSynthesisUtterance(t),a=e.getVoices().find(e=>/de(-|_)?DE/i.test(e.lang));a&&(r.voice=a),r.lang=(null==a?void 0:a.lang)||"de-DE",e.cancel(),e.speak(r)}catch(e){}},children:"\uD83D\uDD0A Listen"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 italic",children:"\uD83D\uDCA1 Tip: Keep it short (3–8 words) for best recognition"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-gray-700 dark:to-gray-600 rounded-xl p-6 space-y-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[X?(0,a.jsx)("button",{className:"px-8 py-4 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl font-bold hover:from-red-600 hover:to-red-700 transition-all shadow-lg hover:shadow-xl flex items-center gap-2 text-lg animate-pulse",onClick:()=>{var e,t;eh();try{null===(t=G.current)||void 0===t||t.stop()}catch(e){}G.current=null,null===(e=q.current)||void 0===e||e.getTracks().forEach(e=>e.stop()),q.current=null,eo(),$(!1)},children:"⏹️ Stop Recording"}):(0,a.jsx)("button",{className:"px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-bold hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl flex items-center gap-2 text-lg",onClick:ep,children:"\uD83C\uDFA4 Start Recording"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm font-semibold ".concat(X?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"),children:X?"\uD83D\uDD34 Recording...":"⚪ Ready"}),(0,a.jsxs)("span",{className:"text-2xl font-mono font-bold text-gray-700 dark:text-gray-300 tabular-nums",children:[Math.floor(ee/60),":",String(ee%60).padStart(2,"0")]})]})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Volume Level"}),(0,a.jsx)("canvas",{ref:ea,width:360,height:16,className:"w-full rounded-lg shadow-inner"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 pt-2",children:[(0,a.jsx)("button",{className:"px-6 py-3 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{o(null),g(""),h(null),Q(null),K.current&&(URL.revokeObjectURL(K.current),K.current=null)},disabled:X,children:"\uD83D\uDD04 Reset"}),(0,a.jsx)("button",{className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",onClick:ef,disabled:!J||X,children:"\uD83C\uDF93 Send to AI Coach"})]}),J&&(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Your Recording:"}),(0,a.jsx)("audio",{className:"w-full",controls:!0,src:J})]}),p&&(0,a.jsxs)("div",{className:"bg-red-100 dark:bg-red-900 border-2 border-red-300 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded-xl text-sm font-medium",children:["⚠️ ",p]})]})]})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCCA Live Feedback"}),(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-full text-xs font-medium",children:"Browser-based"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Real-time transcription as you speak (if supported by your browser)"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-700 dark:to-gray-600 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-1",children:"Expected:"}),(0,a.jsx)("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:t})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-700 dark:to-gray-600 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-1",children:"What You Said:"}),(0,a.jsx)("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:x||(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Waiting for speech..."})})]}),null!==m&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-gray-700 dark:to-gray-600 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400",children:"Similarity Score:"}),(0,a.jsxs)("span",{className:"text-2xl font-bold ".concat(m>=80?"text-green-600":m>=60?"text-yellow-600":"text-red-600"),children:[m,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-3 overflow-hidden",children:(0,a.jsx)("div",{className:"h-3 rounded-full transition-all duration-500 ".concat(m>=80?"bg-green-500":m>=60?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(m,"%")}})}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-3 italic",children:"\uD83D\uDCA1 Tip: Aim for similar word order and endings. Try slower, clearer vowels and final consonants."})]})]})]}),(0,a.jsx)(i,{expected:t,isRecording:X,onTranscriptUpdate:(e,t)=>{g(e),h(t)}}),b&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mb-6 animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 w-1/3 rounded-lg bg-gray-200 dark:bg-gray-700 mb-4"}),(0,a.jsx)("div",{className:"h-4 w-2/3 rounded bg-gray-200 dark:bg-gray-700 mb-2"}),(0,a.jsx)("div",{className:"h-24 rounded-lg bg-gray-200 dark:bg-gray-700"})]}),l&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83C\uDF93 AI Coach Feedback"}),(0,a.jsx)("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-full text-xs font-medium",children:"AI-Powered"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-gray-700 dark:to-gray-600 rounded-xl p-6 text-center",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"Your Score"}),(0,a.jsxs)("div",{className:"text-6xl font-bold mb-2 ".concat(l.score>=80?"text-green-600":l.score>=60?"text-yellow-600":"text-red-600"),children:[l.score,"%"]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-4 overflow-hidden max-w-md mx-auto",children:(0,a.jsx)("div",{className:"h-4 rounded-full transition-all duration-500 ".concat(l.score>=80?"bg-green-500":l.score>=60?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(l.score,"%")}})})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-purple-50 dark:bg-gray-700 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"Expected:"}),(0,a.jsx)("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:l.expected})]}),(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-gray-700 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"What AI Heard:"}),(0,a.jsx)("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:l.transcribed})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-gray-700 dark:to-gray-600 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"\uD83D\uDCAC Coach's Feedback:"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:l.feedback})]}),l.aligned&&l.aligned.length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4",children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-3",children:"\uD83D\uDD0D Word-by-Word Analysis"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:l.aligned.map((e,t)=>{let r="bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200";"sub"===e.op&&(r="bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200"),"del"===e.op&&(r="bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"),"ins"===e.op&&(r="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200");let s="ins"===e.op?e.heard||"":e.expected||"";return(0,a.jsx)("span",{className:"px-3 py-1.5 rounded-lg text-sm font-medium ".concat(r),children:s},t)})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded bg-green-500"})," Match"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded bg-amber-500"})," Substitution"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded bg-red-500"})," Missed"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded bg-blue-500"})," Extra"]})]})]}),(0,a.jsx)("button",{className:"w-full px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl font-bold hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",onClick:ec,disabled:R,children:R?"\uD83D\uDCBE Saving...":"\uD83D\uDCBE Save to History"})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCDA Practice Deck"}),(0,a.jsx)("span",{className:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 rounded-full text-xs font-medium",children:"Suggestions"})]}),(0,a.jsxs)("button",{className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",onClick:ed,disabled:j,children:[j&&(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",className:"animate-spin",children:[(0,a.jsx)("path",{d:"M12 2a10 10 0 100 20 10 10 0 100-20Zm0 3a7 7 0 110 14 7 7 0 010-14Z",fill:"#e5e7eb"}),(0,a.jsx)("path",{d:"M12 2a10 10 0 00-7.07 2.93l2.12 2.12A7 7 0 0119 12h3A10 10 0 0012 2Z",fill:"currentColor"})]}),(0,a.jsx)("span",{children:j?"Loading...":"\uD83D\uDD04 Refresh"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Level:"}),(0,a.jsxs)("select",{className:"px-3 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-purple-600 focus:ring-2 focus:ring-purple-200 dark:bg-gray-700 dark:text-white text-sm font-medium",value:N,onChange:e=>S(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"All Levels"}),(0,a.jsx)("option",{value:"A1",children:"A1 - Beginner"}),(0,a.jsx)("option",{value:"A2",children:"A2 - Elementary"}),(0,a.jsx)("option",{value:"B1",children:"B1 - Intermediate"}),(0,a.jsx)("option",{value:"B2",children:"B2 - Upper Intermediate"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Topic:"}),(0,a.jsxs)("select",{className:"px-3 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-purple-600 focus:ring-2 focus:ring-purple-200 dark:bg-gray-700 dark:text-white text-sm font-medium",value:D,onChange:e=>C(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"All Topics"}),(0,a.jsx)("option",{value:"articles",children:"Articles"}),(0,a.jsx)("option",{value:"verbs",children:"Verbs"}),(0,a.jsx)("option",{value:"nouns",children:"Nouns"}),(0,a.jsx)("option",{value:"cases",children:"Cases"}),(0,a.jsx)("option",{value:"pluralization",children:"Pluralization"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[v.map((e,t)=>(0,a.jsx)("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-700 dark:to-gray-600 border-2 border-purple-200 dark:border-purple-700 rounded-lg hover:from-purple-100 hover:to-pink-100 dark:hover:from-gray-600 dark:hover:to-gray-500 transition-all font-medium text-gray-900 dark:text-white text-sm",onClick:()=>r(e.text),title:e.source,children:e.text},t)),0===v.length&&(0,a.jsxs)("div",{className:"w-full text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("p",{className:"text-lg",children:"\uD83D\uDCED No suggestions available"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"Try adjusting the filters or click Refresh"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCDC Practice History"}),(0,a.jsxs)("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full text-xs font-medium",children:[A.length," attempts"]})]}),(0,a.jsxs)("button",{className:"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-bold hover:from-green-700 hover:to-emerald-700 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",onClick:eu,disabled:P,children:[P&&(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",className:"animate-spin",children:[(0,a.jsx)("path",{d:"M12 2a10 10 0 100 20 10 10 0 100-20Zm0 3a7 7 0 110 14 7 7 0 010-14Z",fill:"#e5e7eb"}),(0,a.jsx)("path",{d:"M12 2a10 10 0 00-7.07 2.93l2.12 2.12A7 7 0 0119 12h3A10 10 0 0012 2Z",fill:"currentColor"})]}),(0,a.jsx)("span",{children:P?"Loading...":"\uD83D\uDD04 Refresh"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[0===A.length&&(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[(0,a.jsx)("p",{className:"text-lg",children:"\uD83D\uDCED No practice history yet"}),(0,a.jsx)("p",{className:"text-sm mt-1",children:"Your saved attempts will appear here"})]}),A.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-600 rounded-xl p-4 border-2 border-gray-200 dark:border-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat(e.score>=80?"text-green-600":e.score>=60?"text-yellow-600":"text-red-600"),children:[e.score,"%"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:["\uD83D\uDD50 ",new Date(e.ts).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-600 dark:text-gray-400 min-w-[60px]",children:"Expected:"}),(0,a.jsx)("span",{className:"text-gray-900 dark:text-white font-medium",children:e.expected})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-600 dark:text-gray-400 min-w-[60px]",children:"You said:"}),(0,a.jsx)("span",{className:"text-gray-900 dark:text-white",children:e.transcribed})]})]})]},t))]})]})]})]})}},9002:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var a=r(3196),s=r(8588),n=r(6463);function l(){let{token:e}=(0,s.a)(),t=(0,n.useRouter)();return(0,a.d4)(()=>{try{let r=localStorage.getItem("token");e||r||t.replace("/login")}catch(r){e||t.replace("/login")}},[e,t]),null}},2800:function(e,t,r){"use strict";var a=r(8472),s=r(9641);let n=a.Z.create({baseURL:"http://localhost:8000/api/v1"});n.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),n.interceptors.response.use(e=>e,e=>{try{var t,r;let a=(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.detail)||(null==e?void 0:e.message)||"Something went wrong";(0,s.h)(String(a))}catch(e){}return Promise.reject(e)}),t.Z=n},8588:function(e,t,r){"use strict";let a;r.d(t,{a:function(){return g}});let s=e=>{let t;let r=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,n={setState:a,getState:s,getInitialState:()=>l,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},l=t=e(a,s,n);return n},n=e=>e?s(e):s;var l=r(1196),o=r(5006);let{useDebugValue:i}=l,{useSyncExternalStoreWithSelector:d}=o,c=!1,u=e=>e,x=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?n(e):e,r=(e,r)=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,r=arguments.length>2?arguments[2]:void 0;r&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let a=d(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return i(a),a})(t,e,r);return Object.assign(r,t),r},g=(a=e=>({token:localStorage.getItem("token"),userId:localStorage.getItem("user_id"),name:localStorage.getItem("user_name"),email:localStorage.getItem("user_email"),setAuth:(t,r)=>{localStorage.setItem("token",t),localStorage.setItem("user_id",r),e({token:t,userId:r})},setProfile:(t,r)=>{try{localStorage.setItem("user_name",t),localStorage.setItem("user_email",r)}catch(e){}e({name:t,email:r})},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user_id"),localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),e({token:null,userId:null,name:null,email:null})}}))?x(a):x},9641:function(e,t,r){"use strict";r.d(t,{h:function(){return s},q:function(){return n}});let a=new Set;function s(e){if(e)for(let t of a)try{t(e)}catch(e){}}function n(e){return a.add(e),()=>{a.delete(e)}}}},function(e){e.O(0,[472,971,23,744],function(){return e(e.s=7004)}),_N_E=e.O()}]);