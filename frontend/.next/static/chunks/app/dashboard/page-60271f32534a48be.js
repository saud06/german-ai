(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{728:function(e,t,r){Promise.resolve().then(r.bind(r,912)),Promise.resolve().then(r.bind(r,1481)),Promise.resolve().then(r.bind(r,7085)),Promise.resolve().then(r.bind(r,9002))},6463:function(e,t,r){"use strict";var n=r(1169);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},3196:function(e,t,r){"use strict";r.d(t,{d4:function(){return n.useEffect}});var n=r(1196)},912:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let n=r(5592);function s(e){let{reason:t,children:r}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return r}},1481:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return a}});let n=r(3619),s=r(8512);function a(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let r=(0,s.getExpectedRequestStore)("next/dynamic css"),a=[];if(r.reactLoadableManifest&&t){let e=r.reactLoadableManifest;for(let r of t){if(!e[r])continue;let t=e[r].files.filter(e=>e.endsWith(".css"));a.push(...t)}}return 0===a.length?null:(0,n.jsx)(n.Fragment,{children:a.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:r.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},4492:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(1196),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useState,l=n.useEffect,i=n.useLayoutEffect,o=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),s=n[0].inst,d=n[1];return i(function(){s.value=r,s.getSnapshot=t,c(s)&&d({inst:s})},[e,r,t]),l(function(){return c(s)&&d({inst:s}),e(function(){c(s)&&d({inst:s})})},[e]),o(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},5107:function(e,t,r){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(1196),s=r(554),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=s.useSyncExternalStore,i=n.useRef,o=n.useEffect,c=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var u=i(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;var h=l(e,(u=c(function(){function e(e){if(!o){if(o=!0,l=e,e=n(e),void 0!==s&&m.hasValue){var t=m.value;if(s(t,e))return i=t}return i=e}if(t=i,a(l,e))return t;var r=n(e);return void 0!==s&&s(t,r)?t:(l=e,i=r)}var l,i,o=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,n,s]))[0],u[1]);return o(function(){m.hasValue=!0,m.value=h},[h]),d(h),h}},554:function(e,t,r){"use strict";e.exports=r(4492)},5006:function(e,t,r){"use strict";e.exports=r(5107)},7085:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var n=r(3619),s=r(1196),a=r(7138),l=r(2800),i=r(8588);function o(e,t){let r=e.toLowerCase().trim(),n=t.toLowerCase().trim();if(r===n)return 100;if(r.includes(n)||n.includes(r))return 75;let s=Math.max(r.length,n.length);if(0===s)return 100;let a=0,l=Math.min(r.length,n.length);for(let e=0;e<l;e++)r[e]===n[e]&&a++;return Math.round(a/s*100)}function c(e){let{expected:t,isRecording:r,onTranscriptUpdate:a}=e,[l,i]=(0,s.useState)([]),[c,d]=(0,s.useState)(""),[u,m]=(0,s.useState)(!0),[h,x]=(0,s.useState)(!1),f=(0,s.useRef)(null);(0,s.useRef)(null);let g=t.toLowerCase().split(/\s+/).filter(e=>e.length>0),p=()=>{i([]),d("")};(0,s.useEffect)(()=>{if(!r){b();return}return v(),()=>b()},[r,t]);let v=()=>{console.log("Starting speech recognition...");let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e){console.error("Speech Recognition not supported in this browser"),m(!1);return}try{let t=new e;t.lang="de-DE",t.continuous=!0,t.interimResults=!0,t.maxAlternatives=1,console.log("Speech Recognition configured:",{lang:t.lang,continuous:t.continuous,interimResults:t.interimResults}),t.onresult=e=>{console.log("Speech recognition result:",e);let t="",r="";for(let n=0;n<e.results.length;n++){let s=e.results[n],a=s[0].transcript.trim();a&&(s.isFinal?t+=a+" ":r+=a+" ")}let n=(t+r).trim(),s=[];if(n){let e=n.split(/\s+/).filter(e=>e.length>0),r=t.trim().split(/\s+/).filter(e=>e.length>0).length;e.forEach((e,t)=>{s.push({word:e.toLowerCase().replace(/[.,!?]/g,""),confidence:85,isFinal:t<r,timestamp:Date.now()+200*t})})}console.log("Final transcript:",t),console.log("Interim transcript:",r),console.log("Word results:",s),d(n),i(s);let l=s.map(e=>e.word),o=j(g,l);null==a||a(n,o)},t.onerror=e=>{console.error("Speech recognition error:",e.error),"not-allowed"===e.error&&alert("Please allow microphone access to use speech recognition")},t.onstart=()=>{console.log("Speech recognition started successfully"),m(!0)},t.onend=()=>{console.log("Speech recognition ended")},console.log("Starting speech recognition..."),t.start(),f.current=t}catch(e){console.error("Error starting speech recognition:",e),m(!1)}},b=()=>{if(f.current){try{f.current.stop()}catch(e){console.warn("Error stopping recognition:",e)}f.current=null}r||p()},j=(e,t)=>{if(0===e.length&&0===t.length)return 100;if(0===e.length)return 0;let r=0,n=Math.max(e.length,t.length);for(let s=0;s<n;s++)r+=o(e[s]||"",t[s]||"");return Math.round(r/n)},w=(e,t)=>{let r=g[e];if(!r)return"extra";let n=o(r,t);return n>=90?"correct":n>=70?"similar":"incorrect"},y=(e,t)=>{let r=t?"":" opacity-70";switch(e){case"correct":return"bg-green-100 text-green-800 border-green-200".concat(r);case"similar":return"bg-yellow-100 text-yellow-800 border-yellow-200".concat(r);case"incorrect":return"bg-red-100 text-red-800 border-red-200".concat(r);case"extra":return"bg-blue-100 text-blue-800 border-blue-200".concat(r);default:return"bg-gray-100 text-gray-600 border-gray-200".concat(r)}};return(0,n.jsxs)("div",{className:"rounded-lg border-2 border-blue-200 bg-blue-50 p-4 space-y-3",children:[(0,n.jsxs)("div",{className:"text-xs text-gray-500 space-x-2",children:[(0,n.jsxs)("span",{children:["Recording: ",r?"Yes":"No"]}),(0,n.jsxs)("span",{children:["Supported: ",u?"Yes":"No"]}),(0,n.jsxs)("span",{children:["Words: ",l.length]})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("div",{className:"text-xs font-medium text-gray-600",children:"Expected:"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-1",children:g.map((e,t)=>(0,n.jsx)("span",{className:"px-2 py-1 text-sm bg-gray-100 text-gray-700 border border-gray-200 rounded",children:e},t))})]}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("div",{className:"text-xs font-medium text-gray-600",children:"You're saying:"}),(0,n.jsx)("div",{className:"min-h-[2.5rem] flex flex-wrap gap-1 items-start",children:l.length>0?l.map((e,t)=>{let r=y(w(t,e.word),e.isFinal);return(0,n.jsxs)("span",{className:"px-2 py-1 text-sm border rounded transition-all duration-200 ".concat(r),title:"Confidence: ".concat(Math.round(e.confidence),"%"),children:[e.word,!e.isFinal&&(0,n.jsx)("span",{className:"ml-1 text-xs opacity-60",children:"..."})]},"".concat(e.timestamp,"-").concat(t))}):(0,n.jsx)("span",{className:"text-gray-400 text-sm italic",children:r?"Listening...":"Start recording to see live transcription"})})]}),l.length>0&&(0,n.jsx)("div",{className:"text-xs text-gray-600 bg-white rounded p-2 border",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("span",{children:["Progress: ",l.filter(e=>e.isFinal).length,"/",g.length," words"]}),(0,n.jsxs)("span",{children:["Accuracy: ",j(g,l.map(e=>e.word)),"%"]})]})}),(0,n.jsx)("div",{className:"text-xs text-gray-500 border-t pt-2",children:(0,n.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-3 h-3 bg-green-100 border border-green-200 rounded"}),"Correct"]}),(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-3 h-3 bg-yellow-100 border border-yellow-200 rounded"}),"Similar"]}),(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-3 h-3 bg-red-100 border border-red-200 rounded"}),"Incorrect"]}),(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-3 h-3 bg-blue-100 border border-blue-200 rounded"}),"Extra"]})]})})]})}function d(){var e,t,r,o,d,g,p,v,b;let{userId:j}=(0,i.a)(),[w,y]=(0,s.useState)(null),[N,S]=(0,s.useState)(null),[k,M]=(0,s.useState)(!1),[E,z]=(0,s.useState)(!1),[D,R]=(0,s.useState)(null),[I,P]=(0,s.useState)(""),[_,C]=(0,s.useState)(!1),[A,q]=(0,s.useState)(""),F=["Guten Morgen!","Wie geht es dir?","Ich bin m\xfcde.","Das Wetter ist sch\xf6n.","Wo ist der Bahnhof?","Ich h\xe4tte gern einen Kaffee.","Entschuldigung, sprechen Sie Englisch?","Vielen Dank f\xfcr Ihre Hilfe.","Ich verstehe nicht.","K\xf6nnen Sie das wiederholen?"],[L,W]=(0,s.useState)(!1),[T,O]=(0,s.useState)(null),[V,B]=(0,s.useState)(null),[Y,H]=(0,s.useState)(0),[U,K]=(0,s.useState)(!1),Z=(0,s.useMemo)(()=>{var e;let t=(null!==(e=null==w?void 0:w.words_learned)&&void 0!==e?e:7)%7;return Array(7).fill(0).map((e,r)=>(r+t)%5)},[null==w?void 0:w.words_learned]);(0,s.useEffect)(()=>{M(!0)},[]),(0,s.useEffect)(()=>{j&&(l.Z.get("/progress/".concat(j)).then(e=>y(e.data)).catch(()=>S("Failed to load progress")),l.Z.get("/progress/".concat(j,"/weekly")).then(e=>{var t;let r=Array.isArray(e.data)?e.data:null===(t=e.data)||void 0===t?void 0:t.values;Array.isArray(r)&&7===r.length&&B(r.map(e=>Number(e)||0))}).catch(()=>{}))},[j]),(0,s.useEffect)(()=>{null!==D&&D>=85&&!L&&C(!0)},[D,L]),(0,s.useEffect)(()=>{var e;if(!window.matchMedia)return;let t=window.matchMedia("(prefers-reduced-motion: reduce)"),r=()=>W(!!t.matches);return r(),null===(e=t.addEventListener)||void 0===e||e.call(t,"change",r),()=>{var e;return null===(e=t.removeEventListener)||void 0===e?void 0:e.call(t,"change",r)}},[]),(0,s.useEffect)(()=>{try{let e=localStorage.getItem("lastPath");e&&e.startsWith("/")&&O(e);let t=Number(localStorage.getItem("highStreak")||"0");Number.isNaN(t)||H(t)}catch(e){}},[]),(0,s.useEffect)(()=>{var e;let t=null!==(e=null==w?void 0:w.streak)&&void 0!==e?e:0;if(t>Y){try{localStorage.setItem("highStreak",String(t))}catch(e){}H(t),K(!0);let e=setTimeout(()=>K(!1),2500);return()=>clearTimeout(e)}},[null==w?void 0:w.streak]);let G=()=>{let e=Math.floor(Math.random()*F.length);return F[e]};return((0,s.useEffect)(()=>{k&&!A&&q(G())},[k,A]),k)?j?(0,n.jsxs)("main",{className:"space-y-6",children:[_&&(0,n.jsx)(f,{onDone:()=>C(!1)}),(0,n.jsx)("section",{className:"rounded-xl border bg-gradient-to-br from-white/70 to-white/40 p-5 backdrop-blur dark:from-zinc-900/60 dark:to-zinc-900/40",children:(0,n.jsxs)("div",{className:"flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{className:"text-2xl font-semibold",children:["Welcome back",w?",":""," ",(0,n.jsx)("span",{className:"text-primary",children:"Learner"}),"!"]}),(0,n.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-zinc-400",children:"Keep your streak alive and focus on one small win today."})]}),(0,n.jsxs)(a.default,{href:"/quiz",className:"btn inline-flex items-center gap-2 hover:scale-[1.02] transition","aria-label":"Start a quick quiz",children:[(0,n.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"opacity-90","aria-hidden":"true",children:(0,n.jsx)("path",{d:"M12 3l2.09 4.24L18.82 8l-3.36 3.27.79 4.73L12 14.77 7.75 16l.79-4.73L5.18 8l4.73-.76L12 3z",fill:"currentColor"})}),(0,n.jsx)("span",{className:"font-medium leading-none",children:"Start a quick quiz"})]}),T&&"/quiz"!==T&&(0,n.jsxs)(a.default,{href:T,className:"btn-outline inline-flex items-center gap-2","aria-label":"Resume last session",children:[(0,n.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"opacity-90","aria-hidden":"true",children:(0,n.jsx)("path",{d:"M12 5v4l4-2-4-2zm-6 7a6 6 0 1112 0 6 6 0 01-12 0zm-2 0a8 8 0 1016 0 8 8 0 00-16 0z",fill:"currentColor"})}),(0,n.jsx)("span",{className:"font-medium leading-none",children:"Resume last session"})]})]})}),N&&(0,n.jsx)("p",{className:"text-red-600",children:N}),(0,n.jsxs)("section",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,n.jsx)(u,{title:"Streak",hint:"days in a row",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)(x,{value:null!==(r=null==w?void 0:w.streak)&&void 0!==r?r:0,goal:30,size:56,animate:!L}),(0,n.jsx)("span",{className:"mt-1 text-[10px] text-gray-500",children:"Goal: 30d"})]}),(0,n.jsxs)("div",{className:"text-3xl font-bold",children:[(0,n.jsx)(h,{value:null!==(o=null==w?void 0:w.streak)&&void 0!==o?o:0,reduceMotion:L})," \uD83D\uDD25"]}),U&&(0,n.jsx)("span",{className:"ml-1 inline-flex items-center rounded-full bg-amber-100 px-2 py-0.5 text-xs font-medium text-amber-800 dark:bg-amber-900/30 dark:text-amber-200",children:"New high!"})]})}),(0,n.jsx)(u,{title:"Words Learned",hint:"total",children:(0,n.jsx)("div",{className:"text-3xl font-bold",children:(0,n.jsx)(h,{value:null!==(d=null==w?void 0:w.words_learned)&&void 0!==d?d:0,reduceMotion:L})})}),(0,n.jsx)(u,{title:"Quizzes",hint:"completed",children:(0,n.jsx)("div",{className:"text-3xl font-bold",children:(0,n.jsx)(h,{value:null!==(g=null==w?void 0:w.quizzes_completed)&&void 0!==g?g:0,reduceMotion:L})})}),(0,n.jsx)(u,{title:"Focus",hint:"common errors",children:(0,n.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,n.jsx)("div",{className:"truncate text-sm text-gray-700 dark:text-zinc-300",children:(null==w?void 0:null===(e=w.common_errors)||void 0===e?void 0:e.join(", "))||"â€”"}),(0,n.jsxs)("div",{className:"relative ml-1 inline-block group",title:"We surface common error themes from recent practice to guide a short focused review.",children:[(0,n.jsx)("span",{className:"inline-flex h-5 w-5 items-center justify-center rounded-full border text-xs text-gray-500 group-hover:bg-gray-50 dark:group-hover:bg-zinc-900",children:"i"}),(0,n.jsx)("div",{className:"pointer-events-none absolute right-0 z-10 hidden w-56 rounded-md border bg-white p-2 text-xs text-gray-700 shadow-md group-hover:block dark:border-zinc-800 dark:bg-zinc-900 dark:text-zinc-200",children:"We surface common error themes (e.g., articles, verb conjugation) so you can run a 2-minute mini-drill and improve faster."})]})]})})]}),(0,n.jsxs)("section",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[(0,n.jsxs)("div",{className:"rounded-xl border p-4",children:[(0,n.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"font-medium",children:"Mini Pronunciation"}),(0,n.jsx)("span",{className:"text-xs text-green-600 font-medium",children:"live"})]}),(0,n.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,n.jsxs)("p",{className:"text-sm text-gray-600 dark:text-zinc-400",children:["Say: ",(0,n.jsx)("span",{className:"font-medium",children:A})]}),(0,n.jsx)("button",{onClick:()=>{q(G()),R(null),P("")},className:"text-xs text-blue-600 hover:text-blue-800 underline",disabled:E,children:"New"})]}),(0,n.jsx)("div",{className:"flex items-center gap-2 mb-3",children:E?(0,n.jsx)("button",{onClick:()=>z(!1),className:"inline-flex items-center gap-2 rounded-md bg-red-500 px-3 py-1.5 text-white shadow hover:brightness-110 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-400/50",children:"Stop"}):(0,n.jsxs)("button",{onClick:()=>z(!0),className:"btn-outline inline-flex items-center gap-2 btn-sm",children:[(0,n.jsx)("span",{className:"inline-block h-2 w-2 rounded-full bg-red-500"}),"Record"]})}),A&&(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(c,{expected:A,isRecording:E,onTranscriptUpdate:(e,t)=>{P(e),R(t)}})}),(0,n.jsx)("div",{className:"text-sm text-gray-700 dark:text-zinc-300","aria-live":"polite","aria-atomic":"true",children:null!==D?(0,n.jsxs)("span",{children:["Your score: ",(0,n.jsxs)("span",{className:"font-semibold",children:[Math.round(D),"%"]}),D>=90?" \uD83C\uDF89":D>=70?" \uD83D\uDC4D":" \uD83D\uDCAA"]}):(0,n.jsx)("span",{className:"text-gray-500",children:"Record to get live pronunciation feedback"})})]}),(0,n.jsxs)("div",{className:"rounded-xl border p-4",children:[(0,n.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"font-medium",children:"This Week"}),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:"activity"})]}),(0,n.jsx)("div",{className:"grid grid-cols-7 gap-2",children:(null!=V?V:Z).map((e,t)=>(0,n.jsx)("div",{className:"aspect-square w-full rounded-md border bg-gradient-to-br from-gray-50 to-white dark:from-zinc-950 dark:to-zinc-900",children:(0,n.jsx)("div",{className:"h-full w-full rounded-md",style:{backgroundColor:["#e5e7eb","#c7d2fe","#a5b4fc","#818cf8","#6366f1"][Math.max(0,Math.min(4,e))]},title:"Day ".concat(t+1,": ").concat(e," sessions")})},t))}),(0,n.jsxs)("div",{className:"mt-2 flex justify-between text-xs text-gray-500",children:[(0,n.jsx)("span",{children:"Mon"}),(0,n.jsx)("span",{children:"Sun"})]})]}),(0,n.jsxs)("div",{className:"rounded-xl border p-4",children:[(0,n.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"font-medium",children:"Smart Insight"}),(null==w?void 0:null===(t=w.badges)||void 0===t?void 0:t[0])&&(0,n.jsx)("span",{className:"rounded-full bg-emerald-100 px-2 py-0.5 text-xs text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300",children:w.badges[0]})]}),(0,n.jsx)("p",{className:"text-sm text-gray-700 dark:text-zinc-300",children:w?(null!==(p=w.words_learned)&&void 0!==p?p:0)<20?"Add 5 new words today to build momentum. Small steps compound quickly.":(null!==(v=w.streak)&&void 0!==v?v:0)===0?"Kickstart your streak with a 3-minute review session right now.":(null!==(b=w.quizzes_completed)&&void 0!==b?b:0)<5?"Take a quick quiz to reinforce what you learned this week.":w.common_errors&&w.common_errors.length?"Target your weak spot: ".concat(w.common_errors[0],". Do a 2-minute mini-drill."):"Great consistency. Keep it up with a short review to close the loop.":"Loading your stats..."}),(0,n.jsxs)(a.default,{href:"/vocab",className:"mt-3 btn-outline inline-flex items-center gap-2 text-sm","aria-label":"Review words",children:[(0,n.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",className:"opacity-90","aria-hidden":"true",children:(0,n.jsx)("path",{d:"M4 6h16v2H4V6zm0 4h10v2H4v-2zm0 4h16v2H4v-2z",fill:"currentColor"})}),(0,n.jsx)("span",{className:"leading-none",children:"Review words"})]})]})]}),(0,n.jsxs)("section",{className:"rounded-xl border p-4",children:[(0,n.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"font-medium",children:"Recent Activity"}),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:"last 3 highlights"})]}),(0,n.jsx)("ul",{className:"divide-y divide-gray-200 dark:divide-zinc-800",children:(function(e){var t,r,n,s;let a=new Date,l=new Date(a);l.setDate(a.getDate()-1);let i=new Date(a);i.setDate(a.getDate()-2);let o=null!==(r=null==e?void 0:e.words_learned)&&void 0!==r?r:0,c=null!==(n=null==e?void 0:e.quizzes_completed)&&void 0!==n?n:0,d=null!==(s=null==e?void 0:e.streak)&&void 0!==s?s:0,u=null==e?void 0:null===(t=e.common_errors)||void 0===t?void 0:t[0],h=[];return h.push({title:"Learned ".concat(Math.max(3,Math.min(12,o%15+3))," new words"),subtitle:"Vocab builder session",when:m(a)}),h.push({title:"Completed ".concat(Math.max(1,c%4)," quiz").concat(Math.max(1,c%4)>1?"zes":""),subtitle:"Reinforced recent topics",when:m(l)}),h.push({title:d>0?"Streak day ".concat(d):"Started a new streak",subtitle:u?"Focus: ".concat(u):"Daily practice",when:m(i)}),h})(w).map((e,t)=>(0,n.jsxs)("li",{className:"flex items-center justify-between py-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"font-medium",children:e.title}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:e.subtitle})]}),(0,n.jsx)("span",{className:"text-xs text-gray-400",children:e.when})]},t))})]})]}):(0,n.jsxs)("p",{children:["Please ",(0,n.jsx)("a",{className:"underline",href:"/login",children:"login"})," to view your dashboard."]}):null}function u(e){let{title:t,hint:r,children:s}=e;return(0,n.jsxs)("div",{className:"group rounded-xl border p-4 transition hover:shadow-sm",children:[(0,n.jsxs)("div",{className:"mb-1 flex items-baseline justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-500",children:t}),r&&(0,n.jsx)("span",{className:"text-xs text-gray-400",children:r})]}),(0,n.jsx)("div",{className:"translate-y-0 transition group-hover:-translate-y-0.5",children:s})]})}function m(e){let t=new Date,r=Math.floor((Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())-Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))/864e5);return 0===r?"Today":1===r?"Yesterday":"".concat(e.toLocaleDateString())}function h(e){let{value:t,duration:r=600,reduceMotion:a=!1}=e,[l,i]=(0,s.useState)(0),o=(0,s.useRef)(null),c=(0,s.useRef)(0);return(0,s.useEffect)(()=>{if(a){i(t);return}c.current=l,o.current=null;let e=0,n=s=>{null==o.current&&(o.current=s);let a=Math.min(1,(s-o.current)/r);i(Math.round(c.current+(t-c.current)*(1-Math.pow(1-a,3)))),a<1&&(e=requestAnimationFrame(n))};return e=requestAnimationFrame(n),()=>cancelAnimationFrame(e)},[t,a]),(0,n.jsx)("span",{children:l.toLocaleString()})}function x(e){let{value:t,goal:r=30,size:a=56,animate:l=!1}=e,i=Math.max(0,Math.min(1,t/r)),[o,c]=(0,s.useState)(i);(0,s.useEffect)(()=>{if(!l){c(i);return}let e=0,t=performance.now(),r=n=>{let s=Math.min(1,(n-t)/600);c(o+(i-o)*(1-Math.pow(1-s,3))),s<1&&(e=requestAnimationFrame(r))};return e=requestAnimationFrame(r),()=>cancelAnimationFrame(e)},[i,l]);let d=(a-6)/2,u=2*Math.PI*d,m=u*o;return(0,n.jsxs)("svg",{width:a,height:a,role:"img","aria-label":"Streak ".concat(t," of ").concat(r," days"),className:t>20?"text-emerald-500":t>=10?"text-indigo-500":"text-zinc-400",children:[(0,n.jsx)("circle",{cx:a/2,cy:a/2,r:d,stroke:"#e5e7eb",strokeWidth:6,fill:"none"}),(0,n.jsx)("circle",{cx:a/2,cy:a/2,r:d,stroke:"currentColor",strokeWidth:6,fill:"none",strokeLinecap:"round",strokeDasharray:"".concat(m," ").concat(u-m),transform:"rotate(-90 ".concat(a/2," ").concat(a/2,")")})]})}function f(e){let{onDone:t}=e,r=(0,s.useRef)(null),a=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=r.current;if(!e)return;let n=e.getContext("2d"),s=e.width=window.innerWidth,l=e.height=window.innerHeight,i=()=>{s=e.width=window.innerWidth,l=e.height=window.innerHeight};window.addEventListener("resize",i);let o=["#f59e0b","#10b981","#3b82f6","#ef4444","#a855f7"],c=Array(120).fill(0).map(()=>({x:Math.random()*s,y:-20-80*Math.random(),vx:(Math.random()-.5)*2,vy:2+3*Math.random(),c:o[Math.floor(Math.random()*o.length)],s:4+4*Math.random(),a:Math.random()*Math.PI,r:Math.random()*Math.PI*2})),d=0,u=()=>{n&&(n.clearRect(0,0,s,l),c.forEach(e=>{e.x+=e.vx,e.y+=e.vy,e.r+=.1,e.y>l+20&&(e.y=-20,e.x=Math.random()*s),n.save(),n.translate(e.x,e.y),n.rotate(e.r),n.fillStyle=e.c,n.globalAlpha=.9,n.fillRect(-e.s/2,-e.s/2,e.s,.6*e.s),n.restore()}),d=requestAnimationFrame(u))};return d=requestAnimationFrame(u),a.current=setTimeout(()=>{cancelAnimationFrame(d),window.removeEventListener("resize",i),null==t||t()},1500),()=>{cancelAnimationFrame(d),clearTimeout(a.current),window.removeEventListener("resize",i)}},[t]),(0,n.jsx)("div",{className:"pointer-events-none fixed inset-0 z-50",children:(0,n.jsx)("canvas",{ref:r,className:"h-full w-full"})})}},9002:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var n=r(3196),s=r(8588),a=r(6463);function l(){let{token:e}=(0,s.a)(),t=(0,a.useRouter)();return(0,n.d4)(()=>{try{let r=localStorage.getItem("token");e||r||t.replace("/login")}catch(r){e||t.replace("/login")}},[e,t]),null}},2800:function(e,t,r){"use strict";var n=r(8472),s=r(9641);let a=n.Z.create({baseURL:"http://localhost:8000/api/v1"});a.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),a.interceptors.response.use(e=>e,e=>{try{var t,r;let n=(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.detail)||(null==e?void 0:e.message)||"Something went wrong";(0,s.h)(String(n))}catch(e){}return Promise.reject(e)}),t.Z=a},8588:function(e,t,r){"use strict";let n;r.d(t,{a:function(){return h}});let s=e=>{let t;let r=new Set,n=(e,n)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,a={setState:n,getState:s,getInitialState:()=>l,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},l=t=e(n,s,a);return a},a=e=>e?s(e):s;var l=r(1196),i=r(5006);let{useDebugValue:o}=l,{useSyncExternalStoreWithSelector:c}=i,d=!1,u=e=>e,m=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?a(e):e,r=(e,r)=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,r=arguments.length>2?arguments[2]:void 0;r&&!d&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),d=!0);let n=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return o(n),n})(t,e,r);return Object.assign(r,t),r},h=(n=e=>({token:localStorage.getItem("token"),userId:localStorage.getItem("user_id"),name:localStorage.getItem("user_name"),email:localStorage.getItem("user_email"),setAuth:(t,r)=>{localStorage.setItem("token",t),localStorage.setItem("user_id",r),e({token:t,userId:r})},setProfile:(t,r)=>{try{localStorage.setItem("user_name",t),localStorage.setItem("user_email",r)}catch(e){}e({name:t,email:r})},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user_id"),localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),e({token:null,userId:null,name:null,email:null})}}))?m(n):m},9641:function(e,t,r){"use strict";r.d(t,{h:function(){return s},q:function(){return a}});let n=new Set;function s(e){if(e)for(let t of n)try{t(e)}catch(e){}}function a(e){return n.add(e),()=>{n.delete(e)}}}},function(e){e.O(0,[472,138,971,23,744],function(){return e(e.s=728)}),_N_E=e.O()}]);