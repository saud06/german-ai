(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[976],{6985:function(e,t,n){Promise.resolve().then(n.bind(n,1837))},357:function(e,t,n){"use strict";var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(8081)},8081:function(e){"use strict";!function(){var t={229:function(e){var t,n,r,o=e.exports={};function s(){throw Error("setTimeout has not been defined")}function c(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:c}catch(e){n=c}}();var i=[],l=!1,u=-1;function d(){l&&r&&(l=!1,r.length?i=r.concat(i):u=-1,i.length&&f())}function f(){if(!l){var e=a(d);l=!0;for(var t=i.length;t;){for(r=i,i=[];++u<t;)r&&r[u].run();u=-1,t=i.length}r=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===c||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];i.push(new m(e,t)),1!==i.length||l||a(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var s=n[e]={exports:{}},c=!0;try{t[e](s,s.exports,r),c=!1}finally{c&&delete n[e]}return s.exports}r.ab="//";var o=r(229);e.exports=o}()},4492:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(1196),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useState,c=r.useEffect,a=r.useLayoutEffect,i=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),o=r[0].inst,u=r[1];return a(function(){o.value=n,o.getSnapshot=t,l(o)&&u({inst:o})},[e,n,t]),c(function(){return l(o)&&u({inst:o}),e(function(){l(o)&&u({inst:o})})},[e]),i(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},5107:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(1196),o=n(554),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},c=o.useSyncExternalStore,a=r.useRef,i=r.useEffect,l=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var d=a(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;var m=c(e,(d=l(function(){function e(e){if(!i){if(i=!0,c=e,e=r(e),void 0!==o&&f.hasValue){var t=f.value;if(o(t,e))return a=t}return a=e}if(t=a,s(c,e))return t;var n=r(e);return void 0!==o&&o(t,n)?t:(c=e,a=n)}var c,a,i=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,n,r,o]))[0],d[1]);return i(function(){f.hasValue=!0,f.value=m},[m]),u(m),m}},554:function(e,t,n){"use strict";e.exports=n(4492)},5006:function(e,t,n){"use strict";e.exports=n(5107)},1837:function(e,t,n){"use strict";n.d(t,{default:function(){return a}});var r=n(3619),o=n(1196),s=n(8588),c=n(357);function a(){let[e,t]=(0,o.useState)([]),[n,a]=(0,o.useState)(""),{isConnected:i,connectionStatus:l,sendMessage:u,sendText:d,ping:f}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{endpoint:t="/ws/connect",autoConnect:n=!0,reconnectInterval:r=3e3,maxReconnectAttempts:a=5,onMessage:i,onConnect:l,onDisconnect:u,onError:d}=e,{token:f}=(0,s.a)(),[m,g]=(0,o.useState)(!1),[p,h]=(0,o.useState)(null),[b,x]=(0,o.useState)("disconnected"),v=(0,o.useRef)(null),y=(0,o.useRef)(0),S=(0,o.useRef)(null),w=(0,o.useCallback)(()=>{let e="https:"===window.location.protocol?"wss:":"ws:",n=c.env.NEXT_PUBLIC_API_URL?c.env.NEXT_PUBLIC_API_URL.replace(/^https?:\/\//,""):"localhost:8000",r="".concat(e,"//").concat(n,"/api/v1").concat(t);return f?"".concat(r,"?token=").concat(f):r},[t,f]),j=(0,o.useCallback)(()=>{var e;if((null===(e=v.current)||void 0===e?void 0:e.readyState)!==WebSocket.OPEN){x("connecting");try{let e=new WebSocket(w());e.onopen=()=>{console.log("✅ WebSocket connected"),g(!0),x("connected"),y.current=0,null==l||l()},e.onmessage=e=>{try{let t=JSON.parse(e.data);h(t),null==i||i(t)}catch(e){console.error("Failed to parse WebSocket message:",e)}},e.onerror=e=>{console.error("❌ WebSocket error:",e),x("error"),null==d||d(e)},e.onclose=()=>{console.log("\uD83D\uDD0C WebSocket disconnected"),g(!1),x("disconnected"),v.current=null,null==u||u(),y.current<a?(y.current++,console.log("Reconnecting... (attempt ".concat(y.current,"/").concat(a,")")),S.current=setTimeout(()=>{j()},r)):console.log("Max reconnection attempts reached")},v.current=e}catch(e){console.error("Failed to create WebSocket:",e),x("error")}}},[w,l,i,d,u,r,a]),N=(0,o.useCallback)(()=>{S.current&&(clearTimeout(S.current),S.current=null),v.current&&(v.current.close(),v.current=null),g(!1),x("disconnected")},[]),k=(0,o.useCallback)(e=>{var t;return(null===(t=v.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN?(v.current.send(JSON.stringify(e)),!0):(console.warn("WebSocket is not connected"),!1)},[]),E=(0,o.useCallback)(e=>k({type:"text",content:e}),[k]),T=(0,o.useCallback)(()=>k({type:"ping",timestamp:Date.now()}),[k]);return(0,o.useEffect)(()=>(n&&f&&j(),()=>{N()}),[n,f]),{isConnected:m,connectionStatus:b,lastMessage:p,connect:j,disconnect:N,sendMessage:k,sendText:E,ping:T}}({onMessage:e=>{console.log("Received:",e),t(t=>[...t,{direction:"received",data:e,timestamp:new Date}])},onConnect:()=>{console.log("Connected to WebSocket")},onDisconnect:()=>{console.log("Disconnected from WebSocket")}}),m=()=>{n.trim()&&(d(n),t(e=>[...e,{direction:"sent",data:{type:"text",content:n},timestamp:new Date}]),a(""))};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-xl border bg-white dark:bg-zinc-900 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"WebSocket Test"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat((()=>{switch(l){case"connected":return"bg-green-500";case"connecting":return"bg-yellow-500";case"error":return"bg-red-500";default:return"bg-gray-500"}})())}),(0,r.jsx)("span",{className:"text-sm font-medium capitalize",children:l})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:n,onChange:e=>a(e.target.value),onKeyPress:e=>"Enter"===e.key&&m(),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-zinc-800 dark:border-zinc-700",disabled:!i}),(0,r.jsx)("button",{onClick:m,disabled:!i||!n.trim(),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition",children:"Send"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>{f(),t(e=>[...e,{direction:"sent",data:{type:"ping",timestamp:Date.now()},timestamp:new Date}])},disabled:!i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition",children:"Ping"}),(0,r.jsx)("button",{onClick:()=>{let e={type:"echo",content:"Hello from frontend!"};u(e),t(t=>[...t,{direction:"sent",data:e,timestamp:new Date}])},disabled:!i,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 transition",children:"Echo Test"}),(0,r.jsx)("button",{onClick:()=>{t([])},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Clear"})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold mb-3",children:["Message Log (",e.length,")"]}),(0,r.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto border rounded-lg p-4 dark:border-zinc-700",children:0===e.length?(0,r.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No messages yet. Send a message to test the connection."}):e.map((e,t)=>(0,r.jsxs)("div",{className:"p-3 rounded-lg ".concat("sent"===e.direction?"bg-indigo-50 dark:bg-indigo-900/20 ml-8":"bg-gray-50 dark:bg-zinc-800 mr-8"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsx)("span",{className:"text-xs font-semibold ".concat("sent"===e.direction?"text-indigo-600":"text-green-600"),children:"sent"===e.direction?"→ SENT":"← RECEIVED"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleTimeString()})]}),(0,r.jsx)("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(e.data,null,2)})]},t))})]})]}),(0,r.jsxs)("div",{className:"rounded-xl border bg-white dark:bg-zinc-900 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Connection Info"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),(0,r.jsx)("span",{className:"font-medium",children:l})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Connected:"}),(0,r.jsx)("span",{className:"font-medium",children:i?"Yes":"No"})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Messages:"}),(0,r.jsx)("span",{className:"font-medium",children:e.length})]})]})]})]})}},8588:function(e,t,n){"use strict";let r;n.d(t,{a:function(){return m}});let o=e=>{let t;let n=new Set,r=(e,r)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,s={setState:r,getState:o,getInitialState:()=>c,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,o,s);return s},s=e=>e?o(e):o;var c=n(1196),a=n(5006);let{useDebugValue:i}=c,{useSyncExternalStoreWithSelector:l}=a,u=!1,d=e=>e,f=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?s(e):e,n=(e,n)=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,n=arguments.length>2?arguments[2]:void 0;n&&!u&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),u=!0);let r=l(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return i(r),r})(t,e,n);return Object.assign(n,t),n},m=(r=e=>({token:localStorage.getItem("token"),userId:localStorage.getItem("user_id"),name:localStorage.getItem("user_name"),email:localStorage.getItem("user_email"),setAuth:(t,n)=>{localStorage.setItem("token",t),localStorage.setItem("user_id",n),e({token:t,userId:n})},setProfile:(t,n)=>{try{localStorage.setItem("user_name",t),localStorage.setItem("user_email",n)}catch(e){}e({name:t,email:n})},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user_id"),localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),e({token:null,userId:null,name:null,email:null})}}))?f(r):f}},function(e){e.O(0,[971,23,744],function(){return e(e.s=6985)}),_N_E=e.O()}]);