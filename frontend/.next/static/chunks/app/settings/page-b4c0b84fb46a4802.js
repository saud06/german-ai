(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{6541:function(e,t,n){Promise.resolve().then(n.bind(n,7150))},6463:function(e,t,n){"use strict";var r=n(1169);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},3196:function(e,t,n){"use strict";n.d(t,{d4:function(){return r.useEffect}});var r=n(1196)},4492:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(1196),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=r.useState,i=r.useEffect,l=r.useLayoutEffect,u=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!s(e,n)}catch(e){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return l(function(){s.value=n,s.getSnapshot=t,c(s)&&o({inst:s})},[e,n,t]),i(function(){return c(s)&&o({inst:s}),e(function(){c(s)&&o({inst:s})})},[e]),u(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:o},5107:function(e,t,n){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(1196),s=n(554),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=s.useSyncExternalStore,l=r.useRef,u=r.useEffect,c=r.useMemo,o=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var d=l(null);if(null===d.current){var m={hasValue:!1,value:null};d.current=m}else m=d.current;var f=i(e,(d=c(function(){function e(e){if(!u){if(u=!0,i=e,e=r(e),void 0!==s&&m.hasValue){var t=m.value;if(s(t,e))return l=t}return l=e}if(t=l,a(i,e))return t;var n=r(e);return void 0!==s&&s(t,n)?t:(i=e,l=n)}var i,l,u=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,s]))[0],d[1]);return u(function(){m.hasValue=!0,m.value=f},[f]),o(f),f}},554:function(e,t,n){"use strict";e.exports=n(4492)},5006:function(e,t,n){"use strict";e.exports=n(5107)},7150:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var r=n(3619),s=n(1196),a=n(9002),i=n(8588),l=n(2338),u=n(999);function c(){let{userId:e,token:t,name:n,email:c,setProfile:o}=(0,i.a)(),[d,m]=(0,s.useState)(n||""),[f,h]=(0,s.useState)(c||""),[x,v]=(0,s.useState)(!1),[p,g]=(0,s.useState)(null),[b,j]=(0,s.useState)(""),[y,w]=(0,s.useState)(""),[S,N]=(0,s.useState)(""),[z,k]=(0,s.useState)(!1),[E,I]=(0,s.useState)(null);(0,s.useEffect)(()=>{m(n||""),h(c||"")},[n,c]),(0,s.useEffect)(()=>{!t||n&&c||(0,u.jo)().then(e=>o(e.name,e.email)).catch(()=>{})},[t,n,c,o]);let P=d.trim().length<2?"Name must be at least 2 characters":null,_=f.trim()?/[^@\s]+@[^@\s]+\.[^@\s]+/.test(f.trim())?null:"Enter a valid email address":"Email is required",C=function(e){let t=0;e.length>=6&&t++,e.length>=10&&t++,/[A-Z]/.test(e)&&t++,/[0-9]/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++;let n=Math.min(t,4);return{score:n,label:["Very weak","Weak","Okay","Good","Strong"][n],color:["bg-red-500","bg-orange-500","bg-yellow-500","bg-lime-600","bg-green-600"][n]}}(y),A=y&&S&&y!==S?"Passwords do not match":null;if(!t)return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.default,{})});async function D(e){if(e.preventDefault(),!P&&!_)try{v(!0);let e=await (0,u.DO)({name:d.trim(),email:f.trim()});o(e.name,e.email),g("Profile updated successfully"),setTimeout(()=>g(null),3e3)}catch(e){var t,n;g((null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.detail)||"Failed to update profile"),setTimeout(()=>g(null),4e3)}finally{v(!1)}}async function O(e){if(e.preventDefault(),y!==S){I("New password and confirmation do not match"),setTimeout(()=>I(null),3e3);return}try{k(!0),await (0,u.Cp)({current_password:b,new_password:y}),I("Password updated successfully"),j(""),w(""),N(""),setTimeout(()=>I(null),3e3)}catch(e){var t,n;I((null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.detail)||"Failed to update password"),setTimeout(()=>I(null),4e3)}finally{k(!1)}}return(0,r.jsxs)("div",{className:"max-w-2xl space-y-6",children:[(0,r.jsx)(a.default,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold mb-1",children:"Settings"}),(0,r.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Manage your account and app preferences."})]}),(0,r.jsxs)("section",{className:"rounded-md border p-4",children:[(0,r.jsx)("h2",{className:"font-medium mb-3",children:"Account"}),(0,r.jsxs)("form",{onSubmit:D,className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-zinc-600 dark:text-zinc-400 mb-1",children:"Name"}),(0,r.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),className:"w-full rounded-md border px-3 py-2 bg-white dark:bg-zinc-900 "+(P?"border-red-400 focus-visible:ring-red-500":""),required:!0}),P&&(0,r.jsx)("div",{className:"mt-1 text-xs text-red-600",children:P})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-zinc-600 dark:text-zinc-400 mb-1",children:"Email"}),(0,r.jsx)("input",{type:"email",value:f,onChange:e=>h(e.target.value),className:"w-full rounded-md border px-3 py-2 bg-white dark:bg-zinc-900 "+(_?"border-red-400 focus-visible:ring-red-500":""),required:!0}),_&&(0,r.jsx)("div",{className:"mt-1 text-xs text-red-600",children:_})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{type:"submit",disabled:!!P||!!_||x,className:"inline-flex items-center justify-center rounded-md border px-3 py-2 text-sm font-medium hover:bg-zinc-100 dark:hover:bg-zinc-800 disabled:opacity-60",children:x?"Saving…":"Save changes"}),p&&(0,r.jsx)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:p})]}),(0,r.jsxs)("div",{className:"text-xs text-zinc-500",children:["User ID: ",(0,r.jsx)("span",{className:"font-mono",children:e})]})]})]}),(0,r.jsxs)("section",{className:"rounded-md border p-4",children:[(0,r.jsx)("h2",{className:"font-medium mb-2",children:"Appearance"}),(0,r.jsx)("p",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:"Use the theme toggle in the top navigation to switch between light and dark mode."})]}),(0,r.jsxs)("section",{className:"rounded-md border p-4",children:[(0,r.jsx)("h2",{className:"font-medium mb-3",children:"Change password"}),(0,r.jsxs)("form",{onSubmit:O,className:"space-y-3 max-w-md",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-zinc-600 dark:text-zinc-400 mb-1",children:"Current password"}),(0,r.jsx)("input",{type:"password",value:b,onChange:e=>j(e.target.value),className:"w-full rounded-md border px-3 py-2 bg-white dark:bg-zinc-900",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-zinc-600 dark:text-zinc-400 mb-1",children:"New password"}),(0,r.jsx)("input",{type:"password",value:y,onChange:e=>w(e.target.value),className:"w-full rounded-md border px-3 py-2 bg-white dark:bg-zinc-900 "+(y&&y.length<6?"border-red-400 focus-visible:ring-red-500":""),required:!0,minLength:6}),y&&(0,r.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,r.jsx)("div",{className:"h-1.5 w-24 rounded bg-zinc-200 overflow-hidden",children:(0,r.jsx)("div",{className:"h-full ".concat(C.color),style:{width:"".concat((C.score+1)*20,"%")}})}),(0,r.jsx)("div",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:C.label})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-zinc-600 dark:text-zinc-400 mb-1",children:"Confirm new password"}),(0,r.jsx)("input",{type:"password",value:S,onChange:e=>N(e.target.value),className:"w-full rounded-md border px-3 py-2 bg-white dark:bg-zinc-900 "+(A?"border-red-400 focus-visible:ring-red-500":""),required:!0,minLength:6}),A&&(0,r.jsx)("div",{className:"mt-1 text-xs text-red-600",children:A})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{type:"submit",disabled:z||!b||!y||y.length<6||!!A,className:"inline-flex items-center justify-center rounded-md border px-3 py-2 text-sm font-medium hover:bg-zinc-100 dark:hover:bg-zinc-800 disabled:opacity-60",children:z?"Updating…":"Update password"}),E&&(0,r.jsx)("div",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:E})]})]})]}),(0,r.jsxs)("section",{className:"rounded-md border p-4",children:[(0,r.jsx)("h2",{className:"font-medium mb-2",children:"About this app"}),(0,r.jsxs)("div",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-zinc-500",children:"App:"})," German AI Learner"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-zinc-500",children:"Version:"})," ",l.J]})]})]})]})}},9002:function(e,t,n){"use strict";n.d(t,{default:function(){return i}});var r=n(3196),s=n(8588),a=n(6463);function i(){let{token:e}=(0,s.a)(),t=(0,a.useRouter)();return(0,r.d4)(()=>{try{let n=localStorage.getItem("token");e||n||t.replace("/login")}catch(n){e||t.replace("/login")}},[e,t]),null}},2800:function(e,t,n){"use strict";var r=n(8472),s=n(9641);let a=r.Z.create({baseURL:"http://localhost:8000/api/v1"});a.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),a.interceptors.response.use(e=>e,e=>{try{var t,n;let r=(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.detail)||(null==e?void 0:e.message)||"Something went wrong";(0,s.h)(String(r))}catch(e){}return Promise.reject(e)}),t.Z=a},2338:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});let r=n(357).env.NEXT_PUBLIC_APP_VERSION||"dev"},999:function(e,t,n){"use strict";n.d(t,{Cp:function(){return i},DO:function(){return a},jo:function(){return s}});var r=n(2800);async function s(){return(await r.Z.get("/users/me")).data}async function a(e){return(await r.Z.put("/users/me",e)).data}async function i(e){return(await r.Z.put("/users/me/password",e)).data}},8588:function(e,t,n){"use strict";let r;n.d(t,{a:function(){return f}});let s=e=>{let t;let n=new Set,r=(e,r)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=r?r:"object"!=typeof s||null===s)?s:Object.assign({},t,s),n.forEach(n=>n(t,e))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(r,s,a);return a},a=e=>e?s(e):s;var i=n(1196),l=n(5006);let{useDebugValue:u}=i,{useSyncExternalStoreWithSelector:c}=l,o=!1,d=e=>e,m=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?a(e):e,n=(e,n)=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,n=arguments.length>2?arguments[2]:void 0;n&&!o&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),o=!0);let r=c(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return u(r),r})(t,e,n);return Object.assign(n,t),n},f=(r=e=>({token:localStorage.getItem("token"),userId:localStorage.getItem("user_id"),name:localStorage.getItem("user_name"),email:localStorage.getItem("user_email"),setAuth:(t,n)=>{localStorage.setItem("token",t),localStorage.setItem("user_id",n),e({token:t,userId:n})},setProfile:(t,n)=>{try{localStorage.setItem("user_name",t),localStorage.setItem("user_email",n)}catch(e){}e({name:t,email:n})},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user_id"),localStorage.removeItem("user_name"),localStorage.removeItem("user_email"),e({token:null,userId:null,name:null,email:null})}}))?m(r):m},9641:function(e,t,n){"use strict";n.d(t,{h:function(){return s},q:function(){return a}});let r=new Set;function s(e){if(e)for(let t of r)try{t(e)}catch(e){}}function a(e){return r.add(e),()=>{r.delete(e)}}}},function(e){e.O(0,[472,971,23,744],function(){return e(e.s=6541)}),_N_E=e.O()}]);