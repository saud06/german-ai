(()=>{var e={};e.id=128,e.ids=[128],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4761:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>g,tree:()=>o}),r(758),r(4681),r(6886),r(1930),r(5866);var a=r(3191),s=r(8716),l=r(7922),n=r.n(l),d=r(5231),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);r.d(t,i);let o=["",{children:["speech",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,758)),"/Users/saud06/CascadeProjects/german-ai/frontend/src/app/speech/page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,4681)),"/Users/saud06/CascadeProjects/german-ai/frontend/src/app/speech/loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,6886)),"/Users/saud06/CascadeProjects/german-ai/frontend/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,1930)),"/Users/saud06/CascadeProjects/german-ai/frontend/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7026))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/saud06/CascadeProjects/german-ai/frontend/src/app/speech/page.tsx"],x="/speech/page",u={require:r,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/speech/page",pathname:"/speech",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},521:(e,t,r)=>{Promise.resolve().then(r.bind(r,1061))},1061:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(326),s=r(7577),l=r(2643);function n(e,t){let r=e.toLowerCase().trim(),a=t.toLowerCase().trim();if(r===a)return 100;if(r.includes(a)||a.includes(r))return 75;let s=Math.max(r.length,a.length);if(0===s)return 100;let l=0,n=Math.min(r.length,a.length);for(let e=0;e<n;e++)r[e]===a[e]&&l++;return Math.round(l/s*100)}function d({expected:e,isRecording:t,onTranscriptUpdate:r}){let[l,d]=(0,s.useState)([]),[i,o]=(0,s.useState)(!0);(0,s.useRef)(null);let c=e.toLowerCase().split(/\s+/).filter(e=>e.length>0),x=(e,t)=>{let r=c[e];if(!r)return"extra";let a=n(r,t);return a>=90?"correct":a>=70?"similar":"incorrect"},u=(e,t)=>{let r=t?"":" opacity-70";switch(e){case"correct":return`bg-green-100 text-green-800 border-green-200${r}`;case"similar":return`bg-yellow-100 text-yellow-800 border-yellow-200${r}`;case"incorrect":return`bg-red-100 text-red-800 border-red-200${r}`;case"extra":return`bg-blue-100 text-blue-800 border-blue-200${r}`;default:return`bg-gray-100 text-gray-600 border-gray-200${r}`}};return(0,a.jsxs)("div",{className:"text-xs space-y-2",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Recording: ",t?"Yes":"No"," | Supported: ",i?"Yes":"No"," | Words: ",l.length,!i&&a.jsx("button",{onClick:()=>{if(!t)return;console.log("Starting demo mode");let e=["guten","morgen"],a=0,s=()=>{if(a<e.length&&t){let t=[];for(let r=0;r<=a;r++)t.push({word:e[r],confidence:85+10*Math.random(),isFinal:r<a});console.log("Demo adding words:",t),d(t);let l=function(e,t){if(0===e.length&&0===t.length)return 100;if(0===e.length)return 0;let r=0,a=Math.max(e.length,t.length);for(let s=0;s<a;s++)r+=n(e[s]||"",t[s]||"");return Math.round(r/a)}(c,t.map(e=>e.word));r?.(e.slice(0,a+1).join(" "),l),++a<=e.length&&setTimeout(s,1500)}};setTimeout(s,1e3)},className:"ml-2 px-2 py-1 bg-blue-500 text-white rounded text-xs",children:"Start Demo"})]}),t&&a.jsx("div",{className:"flex flex-wrap gap-1",children:l.length>0?l.map((e,t)=>{let r=u(x(t,e.word),e.isFinal);return(0,a.jsxs)("span",{className:`px-1.5 py-0.5 text-xs border rounded ${r}`,children:[e.word,!e.isFinal&&a.jsx("span",{className:"ml-0.5 opacity-60",children:"..."})]},t)}):a.jsx("span",{className:"text-gray-400 text-xs italic",children:i?"Listening...":'Demo mode - click Start Demo or say "Guten Morgen"'})})]})}var i=r(8069),o=r(6591),c=r(5047);function x(){let{userId:e}=(0,o.a)(),[t,r]=(0,s.useState)("Ich gehe zur Schule."),[n,x]=(0,s.useState)(null),[u,g]=(0,s.useState)(""),[m,p]=(0,s.useState)(null),[h,b]=(0,s.useState)(null),[f,y]=(0,s.useState)(!1),[j,v]=(0,s.useState)([]),[w,k]=(0,s.useState)(!1),[N,D]=(0,s.useState)(""),[S,C]=(0,s.useState)(""),[R,A]=(0,s.useState)(!1),[P,q]=(0,s.useState)([]),[M,E]=(0,s.useState)(!1),[L,U]=(0,s.useState)(!1),[_,$]=(0,s.useState)(null),[F,T]=(0,s.useState)(0),[B,z]=(0,s.useState)(!1),[G,I]=(0,s.useState)(!1),[Z,Y]=(0,s.useState)(-1);(0,s.useRef)([]),(0,s.useRef)(null);let W=(0,s.useRef)(null),O=(0,s.useRef)(null),H=(0,s.useRef)([]),V=(0,s.useRef)(null),[K,X]=(0,s.useState)(null),[J,Q]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(0),er=(0,s.useRef)(null),ea=(0,s.useRef)(null),es=(0,s.useRef)(null),el=(0,s.useRef)(null),en=(0,s.useRef)(null),ed=()=>{if(en.current&&cancelAnimationFrame(en.current),en.current=null,el.current=null,es.current){try{es.current.close()}catch{}es.current=null}},ei=(0,s.useCallback)(()=>{let e=ea.current,t=el.current;if(!e||!t)return;let r=e.getContext("2d"),a=new Uint8Array(t.fftSize);t.getByteTimeDomainData(a);let s=0;for(let e=0;e<a.length;e++){let t=(a[e]-128)/128;s+=t*t}let l=Math.min(1,5*(s=Math.sqrt(s/a.length)));r.clearRect(0,0,e.width,e.height);let n=e.width,d=e.height;r.fillStyle="#e5e7eb",r.fillRect(0,0,n,d),r.fillStyle="#10b981",r.fillRect(0,0,Math.max(4,l*n),d),en.current=requestAnimationFrame(ei)},[]),eo=async()=>{try{k(!0);let e={size:12};N&&(e.level=N),S&&(e.track=S);let t=await i.Z.get("/speech/suggestions",{params:e});v(t.data||[])}catch{}finally{k(!1)}},ec=async()=>{if(n)try{A(!0),await i.Z.post("/speech/save",{expected:n.expected,transcribed:n.transcribed,score:n.score,feedback:n.feedback}),await ex()}catch{}finally{A(!1)}},ex=async()=>{try{E(!0);let e=await i.Z.get("/speech/history",{params:{limit:10}});q(e.data||[])}catch{}finally{E(!1)}};(0,s.useCallback)(e=>{let t;let r=[],a=0,s=/[\wÄÖÜäöüß]+|[^\w\s]+|\s+/g;for(;null!==(t=s.exec(e));){let e=t[0],s=a,l=a+e.length,n=/[\wÄÖÜäöüß]/.test(e[0]||"");r.push({text:e,start:s,end:l,isWord:n}),a=l}return r},[]);let eu=async e=>{es.current=new(window.AudioContext||window.webkitAudioContext);let t=es.current.createMediaStreamSource(e);el.current=es.current.createAnalyser(),el.current.fftSize=2048,t.connect(el.current),ei()},eg=()=>{et(0),er.current=window.setInterval(()=>et(e=>e+1),1e3)},em=()=>{er.current&&window.clearInterval(er.current),er.current=null},ep=async()=>{b(null),x(null),g(""),p(null),H.current=[];try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});W.current=e;let t=new MediaRecorder(e);O.current=t,t.ondataavailable=e=>{e.data?.size&&H.current.push(e.data)},t.onstop=()=>{let e=new Blob(H.current,{type:t.mimeType||"audio/webm"});V.current&&URL.revokeObjectURL(V.current);let r=URL.createObjectURL(e);V.current=r,X(r)},await eu(e),t.start(),eg(),Q(!0)}catch(e){b("Microphone permission denied or unsupported in this browser.")}},eh=async()=>{if(!K){b("No recording available. Please record first.");return}b(null),y(!0);try{let e=await fetch(K).then(e=>e.blob()),r=new FormData,a=L&&_?(_.sentences||[]).join(" "):t;r.append("expected",a),r.append("file",e,"recording.webm");let s=await i.Z.post("/speech/check",r,{headers:{"Content-Type":"multipart/form-data"}});x(s.data)}catch(e){b("Server speech check unavailable. You can still use local feedback below.")}finally{y(!1)}},eb=(0,c.useRouter)();return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900",children:[a.jsx(l.default,{}),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("button",{onClick:()=>eb.push("/dashboard"),className:"mb-4 text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300 flex items-center font-medium transition-colors",children:"← Back to Dashboard"}),a.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"\uD83C\uDF99️ Speech Practice"}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:"Practice your German pronunciation with AI-powered feedback"})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mb-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"\uD83C\uDFAF Target Sentence (German)"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("input",{className:"flex-1 px-4 py-3 border-2 border-gray-300 dark:border-gray-600 rounded-xl focus:border-purple-600 focus:ring-2 focus:ring-purple-200 dark:bg-gray-700 dark:text-white text-lg transition-all",value:t,onChange:e=>r(e.target.value),placeholder:"Enter a German sentence..."}),a.jsx("button",{type:"button",className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-bold hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg hover:shadow-xl flex items-center gap-2",onClick:()=>{try{let e=window.speechSynthesis;if(!e)return;let r=new SpeechSynthesisUtterance(t),a=e.getVoices().find(e=>/de(-|_)?DE/i.test(e.lang));a&&(r.voice=a),r.lang=a?.lang||"de-DE",e.cancel(),e.speak(r)}catch{}},children:"\uD83D\uDD0A Listen"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 italic",children:"\uD83D\uDCA1 Tip: Keep it short (3–8 words) for best recognition"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 dark:from-gray-700 dark:to-gray-600 rounded-xl p-6 space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[J?a.jsx("button",{className:"px-8 py-4 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl font-bold hover:from-red-600 hover:to-red-700 transition-all shadow-lg hover:shadow-xl flex items-center gap-2 text-lg animate-pulse",onClick:()=>{em();try{O.current?.stop()}catch{}O.current=null,W.current?.getTracks().forEach(e=>e.stop()),W.current=null,ed(),Q(!1)},children:"⏹️ Stop Recording"}):a.jsx("button",{className:"px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl font-bold hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl flex items-center gap-2 text-lg",onClick:ep,children:"\uD83C\uDFA4 Start Recording"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("span",{className:`text-sm font-semibold ${J?"text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400"}`,children:J?"\uD83D\uDD34 Recording...":"⚪ Ready"}),(0,a.jsxs)("span",{className:"text-2xl font-mono font-bold text-gray-700 dark:text-gray-300 tabular-nums",children:[Math.floor(ee/60),":",String(ee%60).padStart(2,"0")]})]})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Volume Level"}),a.jsx("canvas",{ref:ea,width:360,height:16,className:"w-full rounded-lg shadow-inner"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 pt-2",children:[a.jsx("button",{className:"px-6 py-3 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-xl font-bold hover:bg-gray-300 dark:hover:bg-gray-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{x(null),g(""),p(null),X(null),V.current&&(URL.revokeObjectURL(V.current),V.current=null)},disabled:J,children:"\uD83D\uDD04 Reset"}),a.jsx("button",{className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",onClick:eh,disabled:!K||J,children:"\uD83C\uDF93 Send to AI Coach"})]}),K&&(0,a.jsxs)("div",{className:"pt-2",children:[a.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Your Recording:"}),a.jsx("audio",{className:"w-full",controls:!0,src:K})]}),h&&(0,a.jsxs)("div",{className:"bg-red-100 dark:bg-red-900 border-2 border-red-300 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded-xl text-sm font-medium",children:["⚠️ ",h]})]})]})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCCA Live Feedback"}),a.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded-full text-xs font-medium",children:"Browser-based"})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Real-time transcription as you speak (if supported by your browser)"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-700 dark:to-gray-600 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-1",children:"Expected:"}),a.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:t})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-700 dark:to-gray-600 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-1",children:"What You Said:"}),a.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:u||a.jsx("span",{className:"text-gray-400 italic",children:"Waiting for speech..."})})]}),null!==m&&(0,a.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-gray-700 dark:to-gray-600 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400",children:"Similarity Score:"}),(0,a.jsxs)("span",{className:`text-2xl font-bold ${m>=80?"text-green-600":m>=60?"text-yellow-600":"text-red-600"}`,children:[m,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-3 overflow-hidden",children:a.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${m>=80?"bg-green-500":m>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${m}%`}})}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-3 italic",children:"\uD83D\uDCA1 Tip: Aim for similar word order and endings. Try slower, clearer vowels and final consonants."})]})]})]}),a.jsx(d,{expected:t,isRecording:J,onTranscriptUpdate:(e,t)=>{g(e),p(t)}}),f&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 mb-6 animate-pulse",children:[a.jsx("div",{className:"h-6 w-1/3 rounded-lg bg-gray-200 dark:bg-gray-700 mb-4"}),a.jsx("div",{className:"h-4 w-2/3 rounded bg-gray-200 dark:bg-gray-700 mb-2"}),a.jsx("div",{className:"h-24 rounded-lg bg-gray-200 dark:bg-gray-700"})]}),n&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83C\uDF93 AI Coach Feedback"}),a.jsx("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-full text-xs font-medium",children:"AI-Powered"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-gray-700 dark:to-gray-600 rounded-xl p-6 text-center",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"Your Score"}),(0,a.jsxs)("div",{className:`text-6xl font-bold mb-2 ${n.score>=80?"text-green-600":n.score>=60?"text-yellow-600":"text-red-600"}`,children:[n.score,"%"]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-600 rounded-full h-4 overflow-hidden max-w-md mx-auto",children:a.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${n.score>=80?"bg-green-500":n.score>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${n.score}%`}})})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-purple-50 dark:bg-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"Expected:"}),a.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:n.expected})]}),(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"What AI Heard:"}),a.jsx("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:n.transcribed})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-gray-700 dark:to-gray-600 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"\uD83D\uDCAC Coach's Feedback:"}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:n.feedback})]}),n.aligned&&n.aligned.length>0&&(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-3",children:"\uD83D\uDD0D Word-by-Word Analysis"}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:n.aligned.map((e,t)=>{let r="bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200";"sub"===e.op&&(r="bg-amber-100 dark:bg-amber-900 text-amber-800 dark:text-amber-200"),"del"===e.op&&(r="bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"),"ins"===e.op&&(r="bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200");let s="ins"===e.op?e.heard||"":e.expected||"";return a.jsx("span",{className:`px-3 py-1.5 rounded-lg text-sm font-medium ${r}`,children:s},t)})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs",children:[(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-3 h-3 rounded bg-green-500"})," Match"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-3 h-3 rounded bg-amber-500"})," Substitution"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-3 h-3 rounded bg-red-500"})," Missed"]}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-3 h-3 rounded bg-blue-500"})," Extra"]})]})]}),a.jsx("button",{className:"w-full px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl font-bold hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",onClick:ec,disabled:R,children:R?"\uD83D\uDCBE Saving...":"\uD83D\uDCBE Save to History"})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCDA Practice Deck"}),a.jsx("span",{className:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 rounded-full text-xs font-medium",children:"Suggestions"})]}),(0,a.jsxs)("button",{className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",onClick:eo,disabled:w,children:[w&&(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",className:"animate-spin",children:[a.jsx("path",{d:"M12 2a10 10 0 100 20 10 10 0 100-20Zm0 3a7 7 0 110 14 7 7 0 010-14Z",fill:"#e5e7eb"}),a.jsx("path",{d:"M12 2a10 10 0 00-7.07 2.93l2.12 2.12A7 7 0 0119 12h3A10 10 0 0012 2Z",fill:"currentColor"})]}),a.jsx("span",{children:w?"Loading...":"\uD83D\uDD04 Refresh"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Level:"}),(0,a.jsxs)("select",{className:"px-3 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-purple-600 focus:ring-2 focus:ring-purple-200 dark:bg-gray-700 dark:text-white text-sm font-medium",value:N,onChange:e=>D(e.target.value),children:[a.jsx("option",{value:"",children:"All Levels"}),a.jsx("option",{value:"A1",children:"A1 - Beginner"}),a.jsx("option",{value:"A2",children:"A2 - Elementary"}),a.jsx("option",{value:"B1",children:"B1 - Intermediate"}),a.jsx("option",{value:"B2",children:"B2 - Upper Intermediate"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Topic:"}),(0,a.jsxs)("select",{className:"px-3 py-2 border-2 border-gray-300 dark:border-gray-600 rounded-lg focus:border-purple-600 focus:ring-2 focus:ring-purple-200 dark:bg-gray-700 dark:text-white text-sm font-medium",value:S,onChange:e=>C(e.target.value),children:[a.jsx("option",{value:"",children:"All Topics"}),a.jsx("option",{value:"articles",children:"Articles"}),a.jsx("option",{value:"verbs",children:"Verbs"}),a.jsx("option",{value:"nouns",children:"Nouns"}),a.jsx("option",{value:"cases",children:"Cases"}),a.jsx("option",{value:"pluralization",children:"Pluralization"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[j.map((e,t)=>a.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-purple-50 to-pink-50 dark:from-gray-700 dark:to-gray-600 border-2 border-purple-200 dark:border-purple-700 rounded-lg hover:from-purple-100 hover:to-pink-100 dark:hover:from-gray-600 dark:hover:to-gray-500 transition-all font-medium text-gray-900 dark:text-white text-sm",onClick:()=>r(e.text),title:e.source,children:e.text},t)),0===j.length&&(0,a.jsxs)("div",{className:"w-full text-center py-8 text-gray-500 dark:text-gray-400",children:[a.jsx("p",{className:"text-lg",children:"\uD83D\uDCED No suggestions available"}),a.jsx("p",{className:"text-sm mt-1",children:"Try adjusting the filters or click Refresh"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCDC Practice History"}),(0,a.jsxs)("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded-full text-xs font-medium",children:[P.length," attempts"]})]}),(0,a.jsxs)("button",{className:"px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-bold hover:from-green-700 hover:to-emerald-700 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",onClick:ex,disabled:M,children:[M&&(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",className:"animate-spin",children:[a.jsx("path",{d:"M12 2a10 10 0 100 20 10 10 0 100-20Zm0 3a7 7 0 110 14 7 7 0 010-14Z",fill:"#e5e7eb"}),a.jsx("path",{d:"M12 2a10 10 0 00-7.07 2.93l2.12 2.12A7 7 0 0119 12h3A10 10 0 0012 2Z",fill:"currentColor"})]}),a.jsx("span",{children:M?"Loading...":"\uD83D\uDD04 Refresh"})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[0===P.length&&(0,a.jsxs)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[a.jsx("p",{className:"text-lg",children:"\uD83D\uDCED No practice history yet"}),a.jsx("p",{className:"text-sm mt-1",children:"Your saved attempts will appear here"})]}),P.map((e,t)=>(0,a.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-600 rounded-xl p-4 border-2 border-gray-200 dark:border-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:`text-2xl font-bold ${e.score>=80?"text-green-600":e.score>=60?"text-yellow-600":"text-red-600"}`,children:[e.score,"%"]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:["\uD83D\uDD50 ",new Date(e.ts).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-semibold text-gray-600 dark:text-gray-400 min-w-[60px]",children:"Expected:"}),a.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:e.expected})]}),(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-semibold text-gray-600 dark:text-gray-400 min-w-[60px]",children:"You said:"}),a.jsx("span",{className:"text-gray-900 dark:text-white",children:e.transcribed})]})]})]},t))]})]})]})]})}},2643:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var a=r(4597),s=r(6591),l=r(5047);function n(){let{token:e}=(0,s.a)(),t=(0,l.useRouter)();return(0,a.useEffect)(()=>{try{e||t.replace("/login")}catch{e||t.replace("/login")}},[e,t]),null}},4681:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(9510);function s(){return(0,a.jsxs)("main",{className:"space-y-4 animate-pulse",children:[a.jsx("div",{className:"h-8 w-1/2 rounded-md bg-gray-200 dark:bg-zinc-800"}),a.jsx("div",{className:"h-32 rounded-md border bg-gray-100 dark:bg-zinc-900"}),a.jsx("div",{className:"h-4 w-1/3 rounded bg-gray-200 dark:bg-zinc-800"})]})}},758:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>d});var a=r(8570);let s=(0,a.createProxy)(String.raw`/Users/saud06/CascadeProjects/german-ai/frontend/src/app/speech/page.tsx`),{__esModule:l,$$typeof:n}=s;s.default;let d=(0,a.createProxy)(String.raw`/Users/saud06/CascadeProjects/german-ai/frontend/src/app/speech/page.tsx#default`)},7026:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(6621);let s=e=>[{type:"image/svg+xml",sizes:"any",url:(0,a.fillMetadataSegment)(".",e.params,"icon.svg")+"?d88cf511049578a4"}]}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,102,621,871],()=>r(4761));module.exports=a})();